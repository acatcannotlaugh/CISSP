*   软件安全开发

    *   8.1、理解安全并将其融入软件开发生命周期（SDLC）中的安全(Understand and integrate security in the Software Development Life Cycle)

        *   开发方法，例如：Agile、Waterfall、DevOps、DeSecOps Development methodologies

            *   敏捷软件开发理念

                *   个体与交互重于过程和工具、有效的软件重于完整的文档、客户合作重于合同谈判、响应变更重于遵循计划

                *   敏捷模式是许多开发模式的总结，不关注那些按部就班的线性的和分布的流程，而将重点放在彰显跨部门团队协作和持续反馈的机制的增量和交互开发方法上。

                *   原则

                    *   我们最重要的目标，是通过持续不断地及早交付有价值的软件使客户满意。

                    *   欢迎需求变化，即使在开发后期也一样。为了客户的竞争优势，敏捷过程将掌控变化。

                    *   经常性交付可工作的软件，相隔几星期或一两个月，倾向于采用较短的周期。

                    *   业务人员和开发人员必须相互合作，项目中的每一天都不例外。

                    *   激发个体的斗志，以他们为核心搭建项目。提供所需的环境和支援，辅以信任，从而达成目标。

                    *   不论团队内外，传递信息最高效的方式是面对面交谈。

                    *   可工作的软件是进度的首要度量标准。

                    *   敏捷过程倡导可持续开发。责任人、开发人员和用户要能够共同维持其步调稳定延续。

                    *   坚持不懈地追求技术卓越和良好设计，敏捷能力由此增强。

                    *   以简洁为本，它是极力减少不必要工作量的艺术。

                    *   最好的架构、需求和设计出自自组织团队。

                    *   团队定期反思如何能提高成效，并依此调整自身的举止表现。

                *   类型

                    *   Scrum：承认客户的需求不能被完全理解，而且会随时间变化，注重团队协作，客户参与和持续交付。

                    *   AUP：Subtopic 1，敏捷统一过程，采用“在大型上连续”以及在“在小型上迭代”的原理来构建软件系统。

                    *   DSDM：是一种敏捷项目交付框架，主要用作软件开发方法。

                    *   极限编程XP：极限编程将代码审查用到极致并持续使用的开发模式。

                    *   看板：由丰田公司开发的生产计划系统用于支持准时交付。

                    *   探索模式：这是一种在项目目标还未完全明了和定义的情况下使用的开发模式。

                    *   联合应用开发模式JAD：是一种在软件应用开发过程中使用基于研讨会环境的团队协作模式，这种模式最大特点是将所有成员而非开发人员包括在内。

                    *   重用模式：是一种使用渐进式开发代码的软件开发方法

                    *   净室：是一种试图通过遵循结构化和正式的开发和测试方法，减少错误的方法，这种方法通常用于需要通过严格认证过程的高品质和关键任务的应用

            *   DevOps

                *   背景：在软件开发、质量保证和技术操作这些主要的 IT 职能之间存在脱节的情况。这些职能通常配备给不同的人，他们位于组织中不同的单元，通常彼此冲突。

                *   DevOps 这个词是开发(Development)和操作(Operations) 的组合，表示这些功能必须合并和合作才能满足业务需求。

                *   DevOps 模型与敏捷开发方法紧密配合，旨在大幅缩短开发、测试和部署软件所需的时间

        *   成熟度模型（CMM、SW-CMM或SCMM），例如：能力成熟度模型CMM（e.g., Capability Maturity Model CMM），软件保障成熟度模型（Software Assurance Maturity Model SAMM）

            *   SW-CMM，软件能力成熟度模型Software Capability Maturity Model

                *   模型主张所有从事软件开发的组织都依次会经历不同的成熟阶段。

                *   SW-CMM描述了支待软件过程成熟度的原则与惯例，目的是通过实现从特别混乱的过程到成熟的、有纪律的软件过程的发展路径，帮助软件组织改善软件过程的成熟度和质量。

                *   SW-CMM背后的思想是软件的质量依赖于其开发过程的质量。

                *   五个阶段

                    *   初始级（Initiating）：在这个阶段，通常可发现在无组织的工作模式中有很多努力工作的人。通常，这个阶段几乎或完全没有定义软件开发过程。

                    *   可重复级（Repeatable）：在这个阶段，出现基本的生命周期管理过程。开始有组织地重用代码，而且类似的项目可以预期具有可重复的结果。 SEI将用于这个级别的主要处理范围定义为：需求管理、软件项目计划编制、软件项目跟踪和监督、软件转包合同管理、软件质量保证和软件配置管理。

                    *   定义级（Defined）：在这个阶段，软件开发人员依照一系列正式的、文档化的软件开发过程进行操作。所有开发项目都在新的标准化管理模型的制约下进行。SEI将用于这个级别的主要处理范围定义为：组织处理中心、组织处理定义、培训计划、综合的软件管理、软件产品工程、团体之间的协调和对等评审。

                    *   管理级（Managed）：这个阶段，软件处理过程的管理进入下一级别。定量衡量用来获得对开发过程的详细了解。 SEI 将用于这个级别的主要处理范围定义为：定量过程管理和软件质量管理。

                    *   优化级（Optimized）：在优化级的组织中，会采用一个持续改进的过程。成熟的软件开发过程已经确立，可以确保为了改善未来的结果将一个阶段的反馈返回给前一个阶段。 SEI 将用于这个级别的主要处理范围定义为；缺陷预防、技术更改管理和过程更改首理。

            *   IDEAL：一个单位用于启动、规划和实现过程改善措施的模型

                *   启动（Initiating）：在 IDEAL 模型的启动阶段，概述更改的业务原因，为举措提供支持，以及准备好恰当的基础设施。

                *   诊断（Diagnosing）：在诊断阶段，工程师分析组织的当前状态，并为更改给出一般性建议。

                *   建立（Establishing）：在建立阶段，组织采用诊断阶段的一般建议，并且开发帮助实现这些更改的具体动作计划。

                *   行动（Acting）：在行动阶段，停止“讨论”，开始“执行”。组织开发解决方案，随后测试、改进和实现解决方案。

                *   学习（Learning）：与任何质量改进过程一样，组织必须不断分析其努力的结果，从而确定是否已实现期望的目标，必要时建议采取新的行动，使组织重返正轨。

            *   甘特图与PERT

                *   甘特图是一种显示不同时间项目和调度之间相互关系的条形图，提供了帮助计划、协调和跟踪项目中特定任务的调度图表。

                *   计划评审技术(Program Evaluation Review Technique, PERT)是一种项目调度工具，这种工具被用于在开发中判断软件产品的大小并为风险评估计符标准偏差(Standard Deviation, SD)PERT 将估计的每个组件的最小可能大小、最可能的大小以及最大可能大小联系在一起。 PERT被用于直接改进项目管理和软件编码，从而开发更有效的软件。随着编程和管理能力得到改善，软件的实际大小应当更小。

            *   软件保证成熟度模型SAMM：是一个开放的框架，帮助组织制定并实施所面临来自软件安全的特定风险策略

                *   SAMM是由开放 Web 应用程序安全项目 (OWASP) 维护的开源项目。它旨在提供一个框架，将安全活动集成到软件开发和维护过程中，并为组织提供评估其成熟度的能力。SAMM 将软件开发过程划分为五个业务功能：治理、设计、实施、验证、运营。

        *   操作与维护 Operation and Maintenance

        *   变更管理 Change Management

            *   请求变更

            *   变更控制

            *   发布控制

        *   集成产品团队 IPT （Integrated Product Team）

            *   是由众多或者全部利益相关方代表组成的跨职能团队。

            *   一个综合的IPT包括公司执行者，最终客户以及各个环节的成员。

            *   联合应用开发JAD方法：是让用户全面加入到开发商的生产中。他更关注用户群体的参与，则更多关注企业内部的利益相关方。

    *   8.2、在软件开发环境中识别和应用安全控制(Identify and apply security controls in software development ecosystems)

        *   编程语言 Programming languages

            *   机器语言：使用二进制数字的语言被称为机器语言

            *   汇编语言：汇编语言是一种使用助记符来表示 CPU 指令的语言，但仍然要求人们了解硬件专用的、相对模糊的汇编指令。

            *   高级编程语言

                *   编译型：使用编译型语言时，编程人员使用称为编译器的工具将高级语言转换成在特定操作系统中使用的可执行文件。可执行文件随后分发给最终用户，最终用户在合适时使用这些文件。一般而言，不能查看或更改可执行文件中的指令。然而，逆向工程领域的专家可以借助反编译器来逆向编译过程。

                *   解释型：Python JavaScript VBScript是解释型语言。使用这些语言时，编程人员会分发源代码，源代码中包含用高级语言编写的指令。最终用户在系统中用解释器来执行这些代码。此时，用户能够查看编程人员编写的原始指令。

                *   面向对象的程序设计

                    *   消息：消息是对象的通信或输入

                    *   方法：方法是定义对象执行响应操作的内部代码

                    *   行为

                        *   由对象呈现的结果或输出是一种行为

                        *   行为是通过方法处理消息的结果

                    *   类：定义对象的行为的一组对象的公共方法的集合

                    *   实列：对象是包含对象方法的类的实例或者例子

                    *   继承：某个类的方法被另一个子类继承时就会出现继承性

                    *   委托：委托是某个对象将请求转发给另一个对象或委托对象。

                    *   多态：多态性是对象的特性，当外部条件变化时允许以不同的行为响应相同的消息或方法

                    *   内聚：内聚描述相同类中方法目的之间关系的强度

                    *   耦合：耦合是对象之间的交互级别

            *   保证

                *   CC是 Common Criteria for Information Technology Security Evaluation（信息技术安全评估通用准则）的缩写，它是一个国际标准，用于评估信息技术产品和系统的安全性。用于评估信息技术产品和系统的安全性，并确保它们满足特定的安全要求

                *   为确保在新应用程序中构建的安全控制机制在系统的整个生命周期内能正确地实现安全策略，管理员会使用保证过程。

        *   避免和缓解系统故障

            *   输入验证

                *   输入验证核实用户输入的值是否匹配程序员的期望，之后才允许进一步处理

                *   输入验证也可检测异常字符，如文本字段中的引号，这可能是攻击的前兆

            *   身份验证与会话管理

                *   多应用程序，特别是 Web 应用，要求用户在访问敏感信息或修改应用程序中的数据之前进行身份验证。开发人员面临的一个核心安全任务就是确保这些用户通过身份验证，只执行经授权的操作，并自始至终安全地跟踪会话。

                *   输入验证失败

            *   故障防护和应急开放；基本选择

                *   故障防护(fail-secure)状态将系统置入高级别安全性（甚至可能完全禁用），直至管理员诊断问题并将系统还原至正常操作状态；软件应当恢复故障防护状况，这意味着只关闭应用程序或停止整个主机系统的操作。Windows 操作系统中出现的蓝屏(BSOD)就是这种故障响应方式的一个例子，不过实际上它被称STOP 错误。

                *   应急开放(故障打开fail-open) 状态允许用户绕过失败的安全控制，此时用户获得的特权过高。

        *   软件开发生命周期

            *   过程

                *   概念定义

                    *   系统开发的概念定义阶段涉及为系统创建基本的概念声明。简而言之，是由所有利益相关方（开发人员、客户和管理人员）协商的简单声明，规定了项目用途以及系统大体需求。概念定义是一份非常高级的用途声明，仅包括寥寥几段话

                    *   开发过程错综复杂的细节常使项目的最高目标变得模糊不清。定期阅读概念声明能够帮助开发团队回归初心。

                *   功能需求确定 ；三个特征

                    *   输入：提供给函数的数据

                    *   行为：逻辑描述系统应该采取什么动作作为响应不同的输入

                    *   输出：函数提供的数据

                *   控制规范的开发：在控制规范开发过程中，从多个安全角度对系统进行分析是很重要的

                *   设计评审：设计团队完成正式的设计文档后应当与利益相关方召开评审会议，确保每个人都同意此过程在按部就班地进行，在向着成功开发具有所期望功能的系统的方向迈进。

                *   代码审查走审：在编码过程的不同里程碑，项目经理应该安排几次代码审查走查会议。这些技术性会议通常只涉及开发人员，他们根据特定模块的代码副本进行走查，寻找逻辑问题或其他设计/安全性缺陷。这些会议有助于确保不同的开发团队都依据规范开发代码。

                *   用户验收测试

                *   维护和变更管理：任何代码的变更都要通过正式的变更管理流程来进行

            *   模型

                *   瀑布模型

                    *   在一个阶段完成后，项目才进入下一个阶段。正如反向箭头所示，现代的瀑布模型允许开发者返回到之前的阶段，从而纠正后续阶段发现的错误。这通常被称为瀑布模型的反馈环特征(feedback loop characteristic)

                    *   主要问题是：只允许开发人员后退一个阶段。瀑布模型并没有对开发周期后期发现错误如何处理做出相应规定。

                *   螺旋模型：螺旋模型封装了许多迭代的其他模型（也就是瀑布模型），所以也被称为“元模型”或“模型的模型”。

        *   SLA：服务水平协议(SLA)变得越来越流行，它是服务提供商和服务供应商都认同的确保组织向内部和/或外部客户提供服务，并保持适当服务水平的一种方法。对于组织的待续生存能力，把所有的数字电路，应用程序、信息处理系统、数据库或其他关键组件置入 SLA 是明智的，也是至关重要的。

        *   库 Libraries

        *   成套工具 Tool sets

        *   集成开发环境 Integrated Development Environment

        *   运行时间 Runtime

        *   CI/CD 持续集成和持续交付 Continuous Integration and COntinuous Delivery

        *   安全编排自动化与响应SOAR（Security orchestration, automation, and response）：是指一组允许组织自动响应某些事件的技术。SOAR允许安全管理员定义这些事件和响应，通常使用playbook和 runbook，其中：playbook是定义如何验证事件的文档或清单；runbook将playbook数据实现为自动化工具。

        *   软件配置管理 SCM Software Configuration Management 配置管理的过程

            *   配置标识：在配置标识过程中，管理员记录整个组织范围内的软件产品的配置。

            *   配置控制：配置控制确保对软件版本的更改要与更改控制和配置管理策略一致。只有符合这些策略的授权分发才能执行更新操作。

            *   配置状态统计：用于跟踪所有发生的授权更改的正规过程。

            *   配置审计：定期的配置审计能够确保实际的生产环境与统计记录一致，以及确保没有发生未授权的配置变更。

        *   代码存储库 Code repositories

            *   代码仓库是促进软件开发的出色协作工具

            *   代码仓库（如 GitHub Bitbucket SomceForge)还提供版本控制、错误跟踪、Web 托管、发布管理和可支持软件开发的通信功能

        *   应用程序安全性测试，例如：静态应用程序安全测试SAST、动态应用程序安全测试DAST Application security testing (e.g., Static Application Security Testing ，Dynamic Application Security Testing)

            *   软件测试方法

                *   白盒测试：检查程序的内部逻辑结构并逐行执行代码，从而分析程序是否存在潜在的错误。

                *   黑盒测试：通过提供广泛的输入场景并查看输出，黑盒测试从用户的角度检查程序。黑盒测试人员并不访问内部的代码。在提交系统之前进行的最终验收测试就是黑盒测试的常见示例。

                *   灰盒测试：灰盒测试组合上述两种测试方式，是一种流行的软件验证方式。在这种测试方式中，测试人员着手从用户的角度处理软件，分析输入和输出。测试人员也会访问源代码，并使用源代码来帮助设计测试。不过，测试人员在测试期间并不分析程序的内部工作原理。

            *   评估应用程序安全性的测试

                *   静态测试：静态测试通过分析源代码或编译的应用程序来评估软件的安全性，而不必运行软件，但静态分析通常涉及使用自动化工具来检测常见的软件缺陷，如缓冲区溢出。在成熟的开发环境中，应用程序开发人员可以访问静态分析工具，并在整个设计／构建／测试过程中使用它们。

                *   动态测试：动态测试在运行时(runtime)环境中评估软件的安全性，并且通常是部署由其他人编写的应用程序的组织的唯一选择。这种情况下，测试人员通常无法访问软件的源代码。动态测试的常见示例是使用 Web 应用程序扫描工具来检测是否存在跨站脚本、 SQL 注入或 Web用中的其他缺陷。在生产环境下进行动态测试应仔细考虑以避免意外中断服务。

    *   8.3、评估软件安全的有效性(Assess the effectiveness of software security)

        *   更改审核和记录 Auditing and logging of changes

        *   风险分析与缓释 Risk analysis and mitigation

        *   恶意代码

            *   来源

                *   脚本小子：他们并不理解安全漏洞的内在机理，只会从网上下载随时可用的软件（或脚本程序），利用这些软件对远程系统进行攻击

                *   APT

                    *   恶意软件开发的最新趋势是高级持续性威胁(APT) 的兴起。 APT是富有经验的对手，拥有先进的技术和雄厚的资金。这些袭击者通常是军事单位、情报机构，或可能隶属于政府机构的影子团体。 APT 攻击者和其他恶意软件作者之间的主要区别是，恶意软件开发人员通常掌握软件供应商不知道的零日漏洞。因为供应商没有意识到漏洞，所以没有补丁，而且湍洞是非常有效的。由 APT 构建的恶意软件具有高度针对性，旨在只影响少量的敌方系统（通常小到一个），很难防御。

                    *   端点检测和响应 (EDR) 包超越了传统的反恶意软件保护，可帮助保护端点免受攻击。它们将传统防病毒软件包中的反恶意软件功能与旨在更好地检测威胁并采取措施根除威胁的先进技术相结合。EDR包的一些具体功能如下：

                        *   分析端点内存、文件系统和网络活动以寻找恶意活动的迹象

                        *   自动隔离可能的恶意活动以控制潜在的损害

                        *   与威胁情报源集成，实时洞察互联网上其他地方的恶意行为

                        *   与其他事件响应机制集成以自动化响应工作

                        *   这些托管EDR产品称为托管检测和响应（MDR）服务。此外，用户和实体行为分析 (UEBA) 包特别关注端点和其他设备上基于用户的活动，构建每个人正常活动的配置文件，然后突出显示与该配置文件的偏差，这可能表明潜在的攻击。

            *   病毒

                *   主要功能：传播和破坏

                *   传播技术

                    *   主引导记录病毒(Master Boot Record, MBR)：是已知最早的病毒感染形式。这些病毒攻击 MBR一可启动介质（例如，硬盘、软盘或 DVD)上计算机用于在启动过程中加载操作系统的部分。由于MBR 非常小（通常只有 512 字节），因此它装不下实现病毒传播和破坏功能所需的全部代码。为避开空间的限制， MBR 病毒将主要的代码保存在存储介质的其他部分。系统读取受感染的 MBR 时，病毒会引导系统读取并执行存储在其他地方的代码，从而将病毒加载到内存，并可能触发病毒有效载荷的传播。

                    *   文件程序感染病毒：

                        *   许多病毒感染不同类型的可执行文件，并且在操作系统执行这些文件时被激活。在 Windows 系统上，可执行文件的扩展名是exe com 。

                        *   文件程序感染病毒的传播程序可能只对可执行程序做少许改动，从而植入病毒需要复制和破坏系统的代码。文件程序感染病毒的一个变种是同伴病毒。这种病毒是自包含的可执行文件，利用与合法的操作系统文件类似又稍有不同的文件名来躲避检查。同伴病毒依靠基于 Windows 的操作系统在执行程序时与命令关联的默认文件扩展名(.com .exe bat, 并且遵循这个顺序）进行操作。

                    *   宏病毒：一些应用程序为了自动执行重复任务而实现了某些脚本功能。这些功能常使用简单却有效的编程语言，例如 Visual Basic for Applications(VBA) 。虽然宏的确为计算机用户提供了提高生产率的巨大机会，但它们也将系统暴露给另一种感染手段一—宏病毒。

                    *   服务注入病毒：最近爆发的恶意代码使用另一种技术感染系统并逃脱检测—一将自己注入可信的系统进程中，如 svchost.exe winlo n.exe explorer.exe 。通过破坏这些可信进程，恶意代码可绕过主机上运行的反病毒软件的检测。保护系统免受服务注入的最佳实践是确保浏览Web 内容的所有软件（如浏览器、媒体播放器、帮助应用程序）都打上最新的安全补丁。

                *   容易受到病毒攻击的平台，windows

                *   防病毒机制

                    *   大多数杀毒软件都使用一种被称为特征型检测的方法来识别系统中潜在的病毒。实质上，反病责公司维护着一个庞大的数据库，这个数据库中包含所有已知病毒的特征。依赖于反病毒软件及其设置，反病毒软件能够定期扫描存储介质，对所有包含与标准匹配的数据的文件进行扫描。

                    *   许多反病毒软件还使用了基于启发式的机制来检测潜在的恶意软件。这些方法分析软件的行为，寻找病毒活动的迹象，例如试图提高特权级别、掩盖电子踪迹，以及更改不相关的或操作系统的文件。

                    *   Tripwire被设计成用于警示管理员发生未授权的文件修改，常用于检测对 Web 服务器的破坏和类似的攻击。

                *   病毒技术

            *   逻辑炸弹

                *   逻辑炸弹是感染系统并且在满足一个或多个逻辑条件（例如，时间、程序启动、 Web 站点登录等）前保持休眠状态的恶意代码。大多数逻辑炸弹都由软件开发人员编入用户定制的应用程序中，这些开发人员的目的是在被突然解雇时破坏公司的工作。

            *   特诺伊木马

                *   特洛伊木马也是一种程序，它表面友善，但实质上包括了恶意有效载荷，具有对系统或网络的潜在破坏能力

                *   勒索软件：是一种将密码学武器化的恶意软件。勒索软件会生成一个只有勒索软件作者知道的加密密钥，并使用该密钥加密系统硬盘驱动器和任何已安装驱动器上的关键文件。这种加密使授权用户或恶意软件作者以外的任何其他人无法访问数据。然后，用户会收到一条消息，通知他们他们的文件已加密，并要求在特定截止日期之前支付赎金，以防止文件永久无法访问。支付赎金可能是非法的！除了围绕赎金支付的道德考虑之外，还有严重的法律问题。2020 年，美国财政部外国资产控制办公室 (OFAC) 发布了一份咨询报告，通知美国公司许多勒索软件作者受到经济制裁，向他们付款是非法的。

            *   蠕虫

                *   它们包含的破坏力与其他恶意代码不相上下，并且具有额外手段，也就是不需要人为干预就可以自己传播。

                *   震网病毒

                    *   在本地网络上搜索未受保护的管理共享系统

                    *   利用零日漏洞攻击 Windows 服务器上的服务和打印机后台处理程序

                    *   使用默认的数据库密码连接系统

                    *   通过盘进行传播震网病毒在从一个系统传

            *   间谍软件与广告软件

            *   零日漏洞：系统受零日漏洞影响的主要原因有两个

                *   新发现的恶意代码与发布补丁和反病毒更新之间的延迟。这是脆弱性窗口。

                *   部分系统管理员没有及时更新

        *   密码攻击

            *   猜测攻击

            *   字典攻击：密码攻击者使用自动化工具（如 John the Ripper)运行自动的字典攻击，字典攻击利用了这种机制的漏洞。攻击者采用一个包含成千上万词汇的大型字典文件，然后针对这些词汇运行加密函数，以获得加密的等值效果。接着， John the Ripper 程序在密码文件中查找与加密字典相匹，配的加密值。查到某个匹配时， John the Ripper 程序会报告用户名和密码（明文形式），攻击者便获得了对系统的访问权限。

            *   彩虹表攻击：彩虹表攻击是字典攻击的一种变体，旨在减少对散列密码进行暴力攻击所需的时间。加盐保护口令

            *   社会工程学

                *   “鱼叉式网络钓鱼攻击”基于攻击者专门针对个人进行的研究。他们可能包括个人信息，旨在使消息显得更加真实。

                *   “钓鲸”攻击是发送给高价值目标的鱼叉式网络钓鱼攻击的一个子集，如高级管理人员。

                *   Vishing 攻击使用语音通信中的仿冒技术，例如电话。

        *   应用程序攻击

            *   缓冲区溢出

                *   缓冲区溢出漏洞存在于当开发人员没有正确验证用户的输入，以确保以适当的大小输入时。输入太大“溢出”原有的缓冲区，覆盖了内存中的其他数据

                *   有效措施

                    *   用户输入的长度不能超过存放它的缓冲区的大小（例如，将一个具有10个字母的单词输入到最多容纳9个字母的字符串变量中）。

                    *   用户不能向保存输入值的变量类型输入无效的值（例如，将一个字符输入到一个数字型变量中）。

                    *   用户输入的数值不能超出程序规定的参数范围（例如，用“也许”来回答结果只能为“是”或“否”的问题）。

            *   检验时间到使用时间(Time Of Check to Time Of Use,TOC/TOU)

                *   问题是一个时间型漏洞，当程序检查访问许可权限的时间远早于资源请求的时间时，就可能出现这种问题。例如如果操作系统针对用户登录建立了一个综合的访问许可权限列表，并在整个会话期间查询这个列表，就存在 TOCTOU 漏洞。如果系统管理员取消了某个特殊权限，这个限制只有在用户下次登录时才会起作用。如果在用户登录时正好发生取消访问许可权限的操作，那么用户能否访问资源就是不确定的。用户只需要一直保留会话，新的限制就不会起作用。

            *   后门或者维护钩子：后门是没有被记录到文档中的命令序列，它们允许软件开发人员绕过正常的访问控制。在开发和调试过程中，后门常用于加快工作流程并避免强制程序开发人员不断地对系统进行身份验证。

            *   权限提升和rootkit：权限提升攻击的常见方法之一是使用 rootkit rootkit 可从互联网上免费获得，它利用操作系统已知的漏洞。攻击者经常通过使用密码攻击或社会工程学攻击获得系统的普通账号，然后利用 rootkit 将访问权限提高到 root（或系统管理员）级别

        *   WEB安全

            *   跨站脚本，如何防御跨站脚本攻击？在创建允许用户输入的 Web 应用程序时，必须执行输入验证。最基本的做法是：不允许用户在可反射输入字段中输入<SCRIPT>标记。然而，这种做法并不能完全解决问题。对于乐此不疲的攻击者来说，总能找到一些巧妙方法来攻击 Web 应用程序。最佳解决方案应当是：首先确定允许的输入类型，然后通过验证实际输入来确保其与指定的模式相匹配。

            *   跨站请求伪造

                *   跨站请求伪造攻击，简称为 XSRF CSRF 攻击，类似于跨站脚本攻击，但利用不同的信任关系。 XSS 攻击利用用户在网站上执行用户计算机上的代码的信任。XSRF 攻击利用远程站点在用户系统中对用户执行命令的信任。

                *   开发人员应该保护他们的 Web 应用程序免受 XSRF 攻击。这样做的一种方法是创建 Web应用程序，在链接中嵌入攻击者不知道的安全令牌。另一个保障是网站检查从最终用户接收到的请求中的引用 URL, 并且只接受源于他们自己站点的请求。

            *   SQL注入攻击

                *   SQL 注入攻击使恶意攻击者能够违反模型的隔离，从而直接完成攻击内部数据库的 SQL 事务。

                *   措施

                    *   使用准备好的语句。

                    *   执行输入验证。

                    *   限制用户特权。

                *   分类

                    *   基于内容的SQL盲注：在尝试执行攻击Web应用程序之前，攻击者将输入发送到Web应用程序，测试应用程序是否正在解释注入代码。

                    *   基于时间的盲 SQL 注入：渗透测试人员可能会将处理查询所需的时间用作从数据库检索信息的渠道。

            *   代码注入攻击 Code Injection Attacks，SQL注入攻击是代码注入攻击的一般攻击类别中的一个具体示例。攻击者可能会在作为轻量级目录访问协议 (LDAP) 查询的一部分发送的文本中嵌入命令，从而进行 LDAP 注入攻击。XML 注入是另一种类型的注入攻击，其后端目标是 XML 应用程序。跨站脚本是代码注入攻击的一个例子，它将攻击者编写的脚本代码插入到开发人员创建的网页中。命令注入攻击，应用程序代码可以返回到操作系统以执行命令，因此攻击者可能会利用应用程序中的缺陷并获得直接操纵操作系统的能力。

            *   不安全的直接对象引用(Insecure Direct Object References)，在某些情况下，Web开发人员设计的应用程序可以根据用户在查询字符串或POST请求中提供的参数直接从数据库中检索信息。这样可能让攻击者可以轻松查看到URL，然后对其进行修改以尝试检索其他文档。如果应用程序不执行授权检查，则可能允许用户查看超出其权限的信息。这种情况称为不安全的直接对象引用。

            *   文件包含，件包含攻击是实际执行文件中包含的代码，允许攻击者欺骗 Web 服务器执行目标代码。

            *   数据库安全(Database Security)，参数化查询（Parameterized queries）提供了另一种保护应用程序免受注入攻击的技术。在参数化查询中，开发人员准备一条SQL语句，然后允许将用户输入转变为精细定义的变量，传递到语句中，这些变量不允许插入代码。存储过程（Stored procedures）的工作方式类似，但主要区别在于SQL代码不包含在应用程序中，而是存储在数据库服务器上。客户端不直接向数据库服务器发送SQL代码。相反，客户端将参数发送到服务器，然后服务器将这些参数插入到预编译的查询模板中。混淆和伪装（Obfuscation and amouflage）。在数据库中维护敏感的个人信息，如果这些信息被攻击者窃取，会使组织面临风险。数据库管理员应采取以下措施防止数据泄露：数据最小化（Data minimization）、令牌化（Tokenization）、哈希化（Hashing）。

        *   侦查攻击

            *   IP探测

                *   IP 探测（也称为 IP 扫描或 ping 扫描）通常是针对目标网络实施的一种网络侦察类型。通过这种技术，自动化工具试图 ping 某个范围内的所有地址。对 ping 请求进行响应的系统被攻击者记录下来以便进一步分析。没有响应的地址被认为不能加以利用并被忽略。

                *   nmap

            *   端口扫描：管理员应使用此信息禁用其控制下的系统中的不必要服务。这减少了系统的攻击面，使攻击者难以找到攻击的立足点

            *   漏洞扫描

                *   一旦攻击者确定了攻击目标，他们就需要找到这个系统上可利用的漏洞，从而获得希望的访问许可权限。可从互联网获得的多种工具都能协助完成这个任务。其中比较流行的工具包括 Nessus/OpenVAS/Qualys Core/Impact Nexpose

                *   只有将操作系统打上最新的安全补丁，才可能修复漏洞扫描程序报告的所有漏洞。此外，明智的系统管理员要学会像他们的敌人那样思考，下载并运行漏洞扫描程序扫描自己的网络（当然要经过上层管理者的许可），从而了解潜在的攻击者会利用哪些安全漏洞。这样可以快速集中资源以补强网络中最薄弱的环节。

        *   IP欺骗

            *   IP 欺骗攻击中，怀有恶意的人重新配置他们的系统，使其具有可信系统的 IP 地址，然后试图获得访问其他资源的权限。

            *   策略

                *   具有内部源IP地址的包不能从外部进入网络。

                *   具有外部源IP地址的包不能从内部离开网络。

                *   具有私有IP地址的包不能从任何一个方向通过路由器（除非被允许作为内部配置的一部分）。

        *   会话劫持

            *   会话劫持攻击指的是怀有恶意的人中途拦截已授权用户与资源之间通信数据的一部分，然后使用劫持技术接管这个会话并伪装成已授权用户的身份。

            *   常见技术

                *   捕获客户端与服务器之间身份验证的详细信息，并使用这些信息伪装成客户端的身份。

                *   欺骗客户端，使其认为攻击者的系统是与之通信的服务器，并在客户端与服务器建立合法连接时作为中间人，然后断开服务器与客户端的连接。

                *   使用没有正常关闭连接的用户的 cookie 数据访问 Web 应用程序。

    *   8.4、评估获得软件对安全的影响

        *   商业成品COTS Commercial-off-the-shelf

        *   开源 Open source

        *   第三方 Third-party

        *   托管服务，例如：SaaS，IaaS，PaaS Managed services (e.g., Software as a Service，Infrastructure as a Service，Platform as a Service)

        *   数据库与数据存储

            *   类型

                *   关系型数据库

                    *   关系数据库是由行和列组成的平面二维表

                        *   每个数据表都包含多个属性或字段(field);

                        *   每个属性都对应表中的某个列；

                        *   每个用户都有自己的记录或元组(tuple) ，这些记录或元组由表中的某行表示。

                        *   关系中行的数量被视为基数(cardinality) ，列的数量被视为度(degree) 。关系的域(domain) 是一组属性可用的允许值。

                        *   键是表中字段的子集，可用于唯一标识记录

                            *   候选键：可用于唯一标识表中记录的属性子集。在同一个表中，对于组成一个候选键的所有属性而言，任何两条记录的这些属性值都不完全相同。每个表都可能有一个或多个候选键，它们从列的头部选出。

                            *   主键：从表候选键中选出的用来唯一标识表中记录的键被称为主键。每个表只有一个主键，由数据库设计者从候选键中选出。通过不允许利用相同主键插入多个记录， RDBMS 强制实施了主键的唯一性。

                            *   外键：外键用于强制在两个表之间建立关系（也称为参照完整性）。参照完整性确保：如果一个表包含一个外键，那么它对应于关系中另一个表内仍然存在的主键。

                    *   ODBC

                    *   NoSQL

                        *   NoSQL 数据库是使用关系模型以外的模型来存储数据的一类数据库。

                        *   类型

                            *   键/值存储可能是最简单的数据库形式。它们在键/值对中存储信息，其中键本质上是用于唯一标识记录的索引，该索引由数值组成。键/值存储对于高速应用和非常大的数据集是有用的。

                            *   图数据库存储图形格式的数据，用节点表示对象，边缘表示关系。它们可用于表示任何类型的网络，例如社交网络、地理位置和其他可用于图形表示的数据集。

                            *   文档存储类似于键/值存储，因为它们使用键存储信息，但是它们存储的信息类型通常比键/值存储更复杂，并以文档形式存在。文档存储中常用的文档类型包括可扩展标记语言(XML) JavaScript 对象标记(JSON)

                *   数据库事务

                    *   关系数据库支持事务的显式和隐式使用，从而确保数据的完整性。每个事务都是SQL 指令的离散集，作为一组SQL指令要么执行成功，要么失败。

                    *   特点

                        *   原子性：数据库事务必须是原子的，也就是说，必须是“要么全有，要么全无”的事务。如果事务的任何一部分失败，整个事务都会被回滚，就像什么也没发生一样。

                        *   一致性：所有事务都必须在与数据库所有规则（例如所有记录都具有唯一的主键）一致的环境中开始操作。事务结束时，无论事务本身操作期间是否违反了数据库的规则，数据库都必须再次与这些规则保持一致。其他任何事务都不能利用某个事务执行期间可能产生的任何不一致数据。

                        *   隔离性：隔离性原则要求事务之间彼此独立操作。如果数据库接收到两个更改同一数据的SQL 事务，那么在允许一个事务更改数据前，另一个事务必须完全结束。隔离性能够防止一个事务处理另一个事务中途生成的无效数据。

                        *   持久性：据库事务必须是持久的，也就是说一旦被提交给数据库，就会被保留下来。数据库通过使用备份机制（例如事务日志）确保持久性。

                *   体系结构

                    *   层次型数据库：层次式数据模型将关联的记录和字段组合为一个逻辑树结构。

                    *   分布式数据库：分布式数据模型将数据存储在多个数据库中，不过这些数据库是逻辑连接的。即使数据库是由通过互联网相互连接的多个部分组成的，用户也仍将数据库理解为单个实体。每个字段都具有许多子字段和父字段。因此，分布式数据库的数据映射关系是多对多。

            *   存储数据和信息

                *   类型

                    *   主（或实际）存储器由系统的 CPU 可直接访问的主要存储资源组成，通常由易失性的随机访问存储器组成，并且一般是系统可以使用的性能最高的存储资源。

                    *   辅助存储器由许多较廉价的、非易失性的、可供系统长期使用的存储资源组成。典型的辅助存储资源包括磁性的和光学的介质，如磁带、磁盘、硬盘和 CD/DVD

                    *   虚拟内存允许系统利用辅助存储器模拟额外的主存储器资源。例如，系统缺少昂贵的RAM时，可能将硬盘的一部分作为直接 CPU 寻址使用。

                    *   虚拟存储器允许系统利用主存储器模拟辅助存储器的资源。虚拟存储器的最常见例子是作为辅助存储器提供给操作系统的 RAM 磁盘

                    *   随机访问存储器准许操作系统请求介质上任意位置的内容。 RAM 和硬盘都是随机访问存储器的例子。

                    *   顺序访问存储器需要从头到指定地址对整个介质进行扫描。磁带是常见的顺序访问存储器的例子。

                    *   易失性存储器在资源断电时会丢失上面的存储内容。 RAM 是最常见的易失性存储器类型。

                    *   非易失性存储器不依赖于电源的供电来维待存储内容。磁性的光学的介质和非易失性RAM(NVRAM)都是非易失性存储器的例子

                *   威胁

                    *   第一种威胁是无论正在使用哪类存储器，都存在对存储器资源的非法访问

                    *   隐蔽通道攻击是存储器资源面临的第二种主要威胁。隐蔽存储通道准许通过直接或间接地操纵共享存储介质，在两个分类级别之间传输敏感的数据。这可能与向不经意间共享的内存或物理存储器的一部分写入敏感数据一样简单。更复杂的隐蔽存储通道可能操纵磁盘的可用空间或文件大小，在安全级别之间偷偷地传送信息。

            *   数据库安全，攻击

                *   聚合攻击：聚合是将来自不同来源的信息组合在一起的行为数据的组合，形成了新的主体，原本无权获知的信息组合信息的敏感度大于单个部分的敏感度。为防止聚合，需要防止主体以及代表主体的任何应用程序或进程访问整个集合以及各个组件。

                *   推理攻击

                    *   推理在一个主体，通过聚合学到的片段推断出整个故事的发生，当处于较低安全级别的数据，对于较高级别的数据进行间接描述时就会出现问题。

                    *   防止

                        *   单元抑制：是一种用于隐藏特定单元的技术单元中，包含可用于推理攻击的信息

                        *   划分数据库分区：是将数据库划分为不同的部分，这样使得未经授权的人员更难找到可整合在一起的数据片段或可推断或揭示的其他信息。

                        *   噪声和干扰：是一种插入虚假信息的技术，目的是误导攻击者或混淆视听，以影响真实攻击的结果。

            *   数据挖掘

                *   又称数据库中的知识发现

                *   三种方法

                    *   分组classification：根据共有的相似性将数据分组

                    *   概率Probabilitic：识别数据的相互依赖，并用概率分析其关系。

                    *   统计Statistical：识别数据元素之间的关系并使用规则发现

        *   基于知识的系统

            *   专家系统 ：专家系统试图把人类在某个特殊学科累积的知识具体化，并以一致方式将它们应用于未来的决策。一些研究表明：在正确开发和实现专家系统后，专家系统常能做出比人类的常规决策更好的决定。每个专家系统都有两个主要组件：知识库和推理引擎。

                *   知识库包含专家系统已知的规则。

                *   专家系统的另一个主要组件是推理引擎，它对知识库中的信息进行分析，从而得到正确的决策。

            *   机器学习：机器学习技术使用分析能力从数据集中发现知识，而不直接应用人类洞察力。机器学习的核心方法是允许计算机直接从数据中分析和学习，开发和更新活动模型。

                *   监督学习技术使用标记数据进行训练

                *   无监督学习技术使用未标记的数据进行训练。

            *   神经网络：在神经网络中，计算单元链用来尝试模仿人脑的生物学推理过程。

    *   8.5、定义并应用安全编码准则和标准

        *   源代码级安全弱点和漏洞 Security weaknesses and vulnerabilities at source-code level

        *   应用编程接口API安全 Security of Application Programming Interfaces

        *   安全编码实践 Security coding practices

            *   输入验证

            *   关注编译器警告

            *   根据安全策略进行架构和设计

            *   保持简单

            *   默认拒绝

            *   遵循最小特权原则

            *   对发送至其他系统的数据进行清理

            *   纵深防御实战

            *   使用有效的质量保证技术

            *   采用安全编码标准

        *   软件定义安全 Software-defined Security

        *   代码安全 Code Security

            *   代码签名（Code signing） 代码签名为开发人员提供了一种向最终用户确认其代码真实性的方法。

            *   代码重用（Code Reuse） 安全团队应确保外包代码与内部开发代码经过相同级别的测试。

            *   软件多样性（Software Diversity） 安全专业人员寻求避免其环境中的单点故障，以避免在单个组件出现问题时出现可用性风险。

            *   代码库（Code Repositories） 代码存储库的主要目的是将软件开发中使用的源文件存储在一个集中位置，以便安全存储和协调多个开发人员之间的更改。代码存储

            *   版本控制（version control），允许在需要时跟踪更改并将代码回滚到早期版本。代码存储库还有助于避免死代码（dead code）问题，即代码在组织中使用，但没有人负责该代码的维护，事实上，甚至没有人知道原始源文件所在的位置。

            *   完整性测量（Integrity Measurement）。代码完整性测量使用加密散列函数来验证发布到生产中的代码是否与之前批准的代码相匹配。

            *   应用程序弹性（Application Resilience） 当我们设计应用程序时，我们应该以一种使它们在面对不断变化的需求时具有弹性的方式来创建它们。我们通过应用两个相关原则来做到这一点：可扩展性、弹性。可扩展性和弹性是云平台的共同特征，并且是在企业计算环境中使用这些平台的主要驱动力。

        *   MITRE ATT&CK矩阵：是攻击者在各种攻击中使用的已识别策略、技术和程序 (TTP) 的知识库。它是对杀伤链模型的补充，例如Cyber Kill Chain。但是，与杀伤链模型不同，这些策略不是一组有序的攻击。