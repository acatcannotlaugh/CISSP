*   身份与访问管理

    *   5.1、控制对资产的物理和逻辑访问

        *   资产

            *   信息：组织的信息包括其所有数据

            *   系统：组织的系统包括提供一个或多个服务的任何IT系统

            *   设备：设备指任何计算机系统，包括服务器、台式计算机、便携式笔记本、平板电脑、智能手机和外部设备

            *   设施：组织的设施包括其拥有或租赁的任何物理位置

            *   应用程序

            *   人员：为组织工作的人员也是组织的宝贵资产

        *   CIA

            *   保密性：访问控制有助于确保只有授权的主体才能访问客体

            *   完整性：完整性可确保经授权后才能修改数据或系统配置

            *   可用性：系统和数据应该在需要时可供用户和其他主体使用

        *   访问控制的类型

            *   步骤

                *   识别并验证尝试访问资源的用户或其他主体

                *   确定访问是否已经获得授权

                *   根据主体的身份授予或限制访问权限

                *   监控和记录访问尝试

            *   类型

                *   预防Preventive：预防性控制试图阻止不必要或未经授权的活动发生

                *   检测detective：检测性控制尝试发现或检测不需要的或未经授权的活动

                *   纠正corrective：纠正控制修改环境，以便在发生意外或未授权的活动后将系统恢复正常

                *   威慑deterrent：威慑访问控制试图阻止违反安全策略

                *   恢复recovery：恢复访问控制尝试在安全策略违规后修复或恢复资源和功能

                *   指示directive：指示访问控制试图指导、限制或控制主体的操作，以强制或鼓励遵守安全策略

                *   补偿compensating：当无法使用主控制时，或在必要时提高主控制的有效性时，补偿访问控制提供了一种替代方案

            *   实现方式分类

                *   管理访问控制：管理访问控制是由组织的安全策略和其他法规或要求定义的策略和过程

                *   逻辑、技术控制：逻辑访问控制是用于管理访问并为资源和系统提供保护的硬件或软件的机制。

                *   物理控制：物理访问控制是可以物理触碰的项目

    *   5.2、管理对人员、设备和服务的身份认证与验证

        *   主体与客体

            *   主体subject：主体是活动主体，它访问被动客体以从客体接受信息或关于客体的数据

            *   客体object：客体是一个被动实体，它向活动主体提供信息

        *   实施身份管理DM

            *   身份识别与身份验证

                *   身份识别Identification

                    *   是主体声明或宣称身份的过程

                    *   身份验证的核心原则是所有主体必须具有唯一的身份

                *   身份验证：通过一个或多个因素与有效身份数据库进行比较来验证主体的身份

            *   身份注册与证明：当用户首次获得身份时，讲发生注册过程

            *   授权与问责

                *   授权：主体基于已证实的身份被授予对客体的访问权限

                *   问责：在实施审计时，用户和其他主体可以对其行为负责

            *   身份验证因素

                *   三种类型

                    *   类型1-身份验证因素是你知道什么（实体所知）

                        *   密码

                        *   个人身份识别码PIN

                    *   类型2-身份因素是你拥有什么：用户拥有的物理设备可帮助他们提供身份验证（实体所有）

                        *   智能卡

                        *   硬件令牌

                        *   存储卡

                        *   U盘

                    *   类型3-身份验证因素是你是谁或你做了什么

                *   你在什么地方

                *   上下文感知身份验证

        *   凭证管理系统

        *   单/多因子验证MFA

            *   你知道什么

                *   该身份认证因素包括已记住的秘密，例如口令、个人身份识别码(PIN)或口令短语。早期的文档将此称为类型I身份认证因素

                *   什么是弱安全机制

                    *   用户经常选择易于记忆的密码

                    *   随机生成的密码很难记住

                    *   用户经常共享密码

                    *   攻击者通过多种方式检测密码

                    *   密码有时以明文或易于破解的加密协议传输，可以被嗅探

                    *   密码数据库有时存储在可公开访问的在线位置

                    *   暴力攻击可快速发现弱密码

                *   口令策略组件

                    *   最长期限

                    *   口令复杂度

                    *   口令长度

                    *   最短期限

                    *   口令历史

                    *   口令必须经过哈希存储

                *   权威口令建议

                    *   口令不应该过期，不应要求用户定期更改密码

                    *   不应该要求用户使用特殊字符

                    *   用户可以复制和粘贴口令

                    *   用户可以使用所有字符

                    *   口令长度至少8个字符

                    *   口令系统应该筛选口令

                *   密码

                    *   密码短语：密码短语是类似于密码的字符串，但对用户具有独特的含义

                    *   认知密码：认知密码是关于事实或预定义响应的一系列挑战问题，只有主体应该知道

                *   创建强密码

                    *   最长期现要求用户定期更改其密码，1个月修改一次

                    *   密码复杂性，字母大小写，数字，特殊字符

                    *   密码长度：NIST SP 800-63B规定密码长度至少应为8个字符

                    *   密码历史：密码历史记录会记住一定数量的先前密码，并阻止用户重复使用历史记录中的密码

            *   你拥有什么

                *   该身份认证因素包括用户拥有并可以帮助其提供身份认证的物理设备，例如智能卡、硬件令牌、存储卡或通用串行总线(USB) 驱动器。早期的文档将此称为类型II认证因素。

                *   类型

                    *   智能卡：智能卡是信用卡大小的ID card或徽章，其中嵌入了集成电路芯片

                    *   令牌

                        *   令牌设备或硬件令牌是用户可以随身携带的口令生成设备。目前常见令牌包括一个显示6至8位数字的显示器。身份认证服务器存储令牌的详细信息，因此服务器可以随时知悉用户令牌上显示的数字

                        *   类型

                            *   同步动态密码令牌：创建同步动态口令的硬件令牌是基于时间的生成动态口令的硬件令牌和身份认证服务器保持时间同步，定期生成一个新的PIN码，如每60秒更新一次。同步动态口令要求令牌和服务器都拥有准确的时间

                            *   异步动态密码令牌：异步动态密码不使用时钟，而是基于算法和递增计数器生成密码硬件令牌根据算法和递增计数器生成 PIN 码。使用递增计数器时，硬件令牌会创建一个动态的一次性 PIN 码，该 PIN 码在用于身份认证之前保持不变

                        *   使用身份认证应用程序进行双因素身份认证

                            *   HOTP（HMAC-based One-time Password）：是一种基于 HMAC 哈希函数的一次性密码算法。基于哈希的消息身份认证码(HMAC)包含一个哈希函数，该函数被基于 HMAC的一次性口令(HOTP)标准用来创建一次性口令。 HOTP 通常生成六至八位数的 HOTP 值。HOTP 口令类似于令牌创建的异步动态口令。 HOTP 口令在使用前保持有效

                            *   TOTP（Time-based One-time Password）是一种基于时间的一次性密码算法。基于时间的一次性口令(TOTP)标准类似于 HOTP

                        *   无口令身份认证

                        *   设备身份认证

                            *   一种方法是设备指纹识别

                            *   802.lX 是另一种实现设备身份认证的方法

                        *   服务身份认证：许多服务也需要身份认证，通常使用账户名和口令。服务账户只是管理员为服务或应用程序（而不是个人）创建的账户

                        *   双向身份认证

            *   你是谁，生物特征。

                *   该身份认证因素利用人的身体特征并基于生物识别技术。“你是什么”类别的示例包括指纹、面部扫描、视网膜、虹膜和手掌扫描。早期的文档将此称为类型 III身份认证因素。

                *   类型

                    *   指纹

                    *   面部扫描

                    *   视网膜扫描

                    *   可泄露健康状况

                    *   虹膜扫描

                    *   手掌扫描

                    *   手部几何图形

                    *   心脏/脉冲

                    *   语音模式识别

                    *   签名动态：这可识别主题如何写入一串字符

                    *   击键模式-：通过分析飞行时间和停留时间来测量主题如何使用键盘

                *   生物特征因素错误评级

                    *   错误拒绝率

                        *   当对有效主体进行身份认证时，身份认证系统就出现了错误拒绝。

                        *   这种现象有时也被称作假阴性身份人证。错误拒绝与有效身份认证的比率玻称作错误拒绝率(FRR)。错误拒绝也被称为I 类错误

                    *   错误接受率

                        *   当对无效主体进行身份认证时，身份认证系统就出现了错误接受

                        *   这种情况就是误报或错误接受。误报与有效身份认证的比率是错误接受率(FAR) 。错误接受有时被称为 II 类错误

                    *   交叉错误率（Crossover Error Rate，CER）是一种衡量生物特征识别系统性能的指标，CER = (FAR + FRR) / 2

                        *   CER 作为标准评估值，可以评价不同生物识别设备的准确性。

                        *   CER 较低的设备比 CER 较高的设备更准确

            *   你在什么地方：该身份认证因素基于具体计算机来识别主体所在的位置，主要通过IP地址或者来电显示来识别地理位置。通过物理位置执行的访问控制迫使主体出现在具体位置。地理定位技术可根据 IP 地址来识别用户位置，并由某些身份认证系统使用

            *   上下文感知身份认证：许多移动设备管理(MDM)系统使用上下文感知身份认证来识别移动设备用户。上下文感知身份认证可以识别多个属性，如用户位置、时段、移动设备等

        *   可核查性：务必预防与访问控制相关的两个问题：过度权限和权限蔓延。当用户拥有的权限超过完成工作任务所需的权限时，就会出现过度权限。如果用户账户拥有过多的权限，管理员应撤销不必要的权限。权限蔓延是指随着工作角色和所分配任务的变化，用户账户随着时间的推移积累额外的权限。

        *   会话管理

            *   台式计算机和笔记本电脑内置屏幕保护程序，锁屏

            *   安全的在线会话通常也会在一段时间后断开，注销，退出

            *   Web 开发框架还包括会话过期的方法，会话失效

        *   身份注册、证明和建立

            *   组织通常在雇用新员工后执行一个入职流程。入职流程包括创建用户账户并为其提供新工作所需的所有权限。

            *   新用户账户的初始创建通常被称为登记或注册。取消账户的最简单方法是删除，有时被称为账户注销

            *   当员工离开组织时，组织会实施取消配置和离职流程。

        *   联合身份管理FIM

            *   定义

                *   联合身份是指将一个系统中的用户身份与多个身份管理系统关联起来

                *   FIM 将其扩展到单个组织之外。多个组织可以加入一个联盟或组，并同意共享身份信息。每个组织中的用户可以在自己的组织中登录一次，并将其凭证与联合身份关联起来。然后，用户可以使用此联合身份访问组内任何其他组织中的资源

            *   类型

                *   基于云的联合：基于云的联合通常使用第三方服务来共享联合身份

                *   本地联合：联合身份管理系统可以托管在本地、云上，也可以将两者结合为混合系统

                *   混合联合：混合联合是云计算联合和本地联合的组合

        *   单点登录SSO

            *   LDAP和集中访问控制：很多目录服务都基于轻量级目录访问协议

            *   LDAP和PKI：PKI在数字证书集成到传输中使用LDAP

            *   Kerberos

                *   AES加密

                *   元素

                    *   密钥分发中心

                    *   身份验证服务器

                    *   票据授予票据

                    *   票据

                *   过程

                    *   ![](https://api2.mubu.com/v3/document_image/947de8a5-5264-4d48-8b40-2d03eeb31d38-23041862.jpg)
                *   Kerberos 利用攻击（Kerberos Exploitation Attack）

                    *   Microsoft 的 Active Directory 使用 Kerberos作为主要身份验证协议。不幸的是，Kerberos容易受到使用开源工具（如 Mimikatz）的多种利用攻击。Kerberos 漏洞利用攻击包括：超-哈希传递攻击（Overpass the Hash）、 票据传递攻击（Pass the Ticket）、银票据（SilverTicket）、金票据（Golden Ticket）、Kerberos暴力破解（Kerberos Brute-Force）、ASREPRoast攻击、Kerberoasting攻击。

                *   Windows使用Kerberos进行身份验证。RADIUS通常用于无线网络、调制解调器和网络设备。OAuth主要用于web应用程序

            *   联合身份管理

                *   超文本标记语言HTML

                *   可扩展标记语言XML：不仅描述如何通过实际描述数据来显示数据，还可包含用于描述数据的标记

                *   安全断言标记语言：安全断言标记语言SAML是基于XML的语言，通常用于在联合组织之间交换身份验证和授权(AA)信息，它通常用于为浏览器访问提供SSO功能

                *   服务配置标记语言

                    *   服务配置标记语言SPML基于XML,专门用来交换用于联合身份SSO目的的用户信息。

                    *   基于目录服务标记语言DSML,它可采用XML格式显示基于LDAP的目录服务信息

                *   可扩展访问控制标记语言：用于定义XML格式的访问控制策略

                *   OAuth2.0：OAuth(开放式身份验证)是一种用于访问委派的开放标准

                *   OpenID：是一个开放标准，提供分散式身份验证，运行用户使用由第三方服务维护的一组凭据登陆多个不相干的网站

                *   OpenID 连接

                    *   OpenID连接是使用OAuth2.0框架的身份验证层

                    *   OpenID连接使用符合REST的Web服务来检索JWT。

        *   4A

            *   身份标识(Identification)：是主体声明或宣称身份的过程。

            *   身份认证(Authentication)：将一个或多个因素与有效身份标识数据库（如用户账户）进行比对，从而验证主体的身份。

            *   授权(Authorization)：基于已验证的身份授予主体对客体的访问权限

            *   审计(Audit)：是指对信息系统中的所有活动进行监视、检查和复核的过程，以确保系统的安全性和合法性。

            *   记账或问责(Accountability)：在实施审计时，用户和其他主体可以对其行为负责。

        *   准时生产JIT,Just-in-Time

            *   一些联合身份解决方案支持即时 (JIT)的配置功能。这些解决方案会自动创建两个实体之间的关系，以便新用户可以访问资源。

            *   JIT 解决方案无需任何管理员干预即可创建连接。JIT 系统通常使用 SAML 来交换所需的数据。

            *   JIT 系统通常使用 SAML 来交换所需的数据。 SAML 为实体间各种数据的交换提供非常大的灵活性。该过程从第三方验证用户登录受信任组织的网络开始。

            *   JIT或即时供应机制在需要帐户时创建帐户，而不是预先创建帐户。这是限制所维护帐户数量的一种有效方法，如果用户帐户数量是许可协议的一部分，则这种方法非常有用。

    *   5.3、通过第三方服务进行联合身份验证

        *   本地部署

        *   云端

        *   混合

        *   集成身份服务，身份即服务，Identity as a Service ,IDaaS

        *   AAA

            *   RADIUS：一种网络协议，提供客户端/服务器身份验证和授权，并且审计远程用户。RADIUS协议可以用于拨号服务器、VPN和无线AP等环境。其终端访问控制器访问控制系统（TACACS）将身份验证和授权过程组合在一起，使用固定密码进行身份验证。而且Diameter作为对等协议，扩展了RADIUS协议，允许通过不同技术来进行不同类型身份验证。

                *   UDP

                *   仅加密密码

            *   TACACS+：（Terminal Access Controller Access Control System，终端访问控制器控制系统协议）是在TACACS协议的基础上进行了功能增强的安全协议。该协议与RADIUS协议的功能类似，采用客户端/服务器模式实现NAS与TACACS+服务器之间的通信。

                *   TACACS+：不常用，是RADIUS的替代方案

                *   TACACS+

                    *   将身份验证、授权和问责分离为单独的进程

                    *   加密所有身份验证信息

                    *   TACACS和XTACACS使用UDP端口49，TACACS+使用TCP49端口

                *   Diameter：是一种对等协议，扩展了RADIUS协议。Diameter协议可以用于拨号服务器、VPN和无线AP等环境，将身份验证、授权和审计功能过程分隔，采用双因素用户胡身份验证，基于TCP，加密客户端与服务端的所有流量。

                    *   支持多种协议，如传统IP，移动IP，VoIP

                    *   支持漫游

    *   5.4、实施和管理授权机制

        *   权限、权利和特权的概念

            *   权限Permission：通常权限是指授予对客体的访问权限，并确定拟对其执行的操作。

            *   权利Rright：主要是指对某个客体采取行动的能力。

            *   特权Privilege：特权是权利和权限的组合。

        *   授权机制

            *   隐式拒绝

                *   访问控制的基本原则是隐式拒绝，即默认拒绝

                *   隐式拒绝原则确保拒绝访问客体，除非已明确授予主体访问权限

            *   访问控制矩阵

                *   访问控制矩阵是包含主体、客体和分配的权限的表格

                *   矩阵中列出的每个文件都有一个单独的ACL，列出授权用户及其分配的权限

            *   能力表与ACL

                *   能力表（Capability Table）是它将访问权限分配给用户或进程，以控制对系统资源的访问。

                *   与ACL的不同之处在于，在于谁为中心

                *   ACL以客体为中心，标识针对任何特定客体授予主体的访问权限。能力表以主体为中心，标识允许主体访问的客体

                *   访问控制列表（ACL)和只读属性有助于防止未经授权的修改，但它们无法验证文件未被修改过

                *   能力表和 ACL 的主要区别在于它们的应用场景和实现方式。能力表主要用于操作系统中的访问控制，而 ACL 主要用于网络中的访问控制。能力表的实现方式是将访问权限表示为位向量，而 ACL 的实现方式是将访问权限表示为规则列表。

            *   约束接口

                *   应用程序使用受限约束或受限制的接口来限制用户可执行或查看的内容

                *   方法

                    *   在用户无权使用某功能时隐藏该功能

                    *   应用程序显示菜单项但会显示为变暗或禁用

                    *   一种常见方法是在用户无权使用某功能时隐藏该功能

            *   基于内容的控制：基于内容的控制根据客体内的内容限制对数据的访问，数据库视图就是一种基于内容的控制

            *   依赖上下文的控制

                *   依赖上下文的访问控制在授予用户访问权限之前需要特点的活动

                *   也可使用日期和时间空间作为依赖于上下文的控制

            *   因需可知：确保主体只能访问他们的工作任务和工作只能必须知道的内容

            *   最小特权：最小特权原则确保主体仅被授予执行其工作任务和工作职能所需的权力

            *   职责和责任分离：职责分离原则确保将敏感职能分为两个或多个员工执行的任务。通过创建一个检查和制衡系统来防止欺诈和错误

        *   访问控制模型

            *   基于角色的访问控制(RBAC)，通过给角色授权访问权限范围来限制访问范围，授权某个主体权限只需要将该主体设置为该角色。堡垒机

                *   一个关键的特征是角色或组的使用

                    *   用户账户不是直接向用户分配权限，而是放置在角色中，管理员为角色分配权限

                    *   WINDOWS操作系统使用组实现此模型

                *   基于角色的访问控制通常使用组来实现

                *   有助于防止特权蠕变，强制执行最小特权原则。

                *   特权蠕变是用户随着角色和访问需求的变化而逐渐产生特权的趋势

                *   RBAC在频繁更改人员的动态环境中非常有用，管理员只需要将新用户添加到适当的角色即可轻松授予多个权限

            *   基于规则的访问控制，通过建立规则组来确定访问的权限，授权某个主体是否能够访问，需要授予该规则组。如：防火墙

                *   关键特征是它采用适用于所有主体的全局规则

                    *   防火墙使用的规则允许或组织所有用户的流量

                    *   基于规则的访问控制模型中的规则有时被称为“限制”或“过滤器”

                *   基于规则的访问控制模型使用一组规则、限制或过滤器来确定系统上可以和不可以发生的操作。

                *   显著特征是它们具有适用于所有主体的全局规则

            *   自主访问控制DAC，主体（用户或进程）可以自主决定是否将其访问权限授予其他主体。

                *   自主访问控制模型的一个关键特征是每个客体都有一个所有者，每个主体都有自己的访问控制列表（ACL），所有者可授予或拒绝其他任何主体的访问。

                *   表现形式

                    *   ACL：每个ACL定义授予或拒绝主体的访问类型

                    *   能力表

            *   强制访问控制MAC，标签访问，访问控制决策由系统管理员或安全策略决定，而不是由主体（用户或进程）决定。

                *   关键特征是使用应用与主体和客体的标签：MAC模型有时类似于格子，因此它被称为基于格子Lattice的模型

                *   强制访问控制模型依赖于分类标签的使用，每个标签代表一个安全域

                *   安全域是共享共同安全策略的主体和客体的集合

                *   使用MAC模型进行划分强制邀请了解原则

                *   MAC模型是禁止的不是宽容的

                *   安全分类标识敏感度的层次结构

            *   基于属性的访问控制ABAC，访问控制决策基于主体、资源和操作的属性。

                *   关键特征是它使用可包含多个属性的规则

                    *   比基于规则的访问控制模型更灵活

                    *   该模型将规则平等地应用与所有主体

                    *   许多软件定义网络使用abac模型

                *   是基于规则的访问控制的高级实现，ABAC模型使用包含规则的多个属性的策略

            *   基于风险的访问控制：基于风险的访问控制模型在评估风险后授予访问权限。此模型使用嵌在软件代码中的策略来评估环境和情况，然后做出基于风险的决策。此模型运用机器学习并根据过去的活动对当前活动做出预涓。

        *   安全策略

            *   安全策略是定义组织安全要求的文档，它确定了需要保护的资产、保护它们的安全解决方案及应该达到的程度

            *   策略是访问控制的一个重要元素，因为它们可帮助组织内的人员了解哪些安全要求很重要

            *   组织使用纵深防御策略实施访问控制，这使用多个层级的访问控制来提供分层的安全性

                *   组织的安全策略是管理访问控制之一，它通过定义安全要求为资产提供一层防御

                *   人员是防御的关键组成部分，需要适当的培训和教育来实现，遵守和支持组织安全策略中定义的安全元素

                *   管理、技术和物理访问控制的组合提供了更强大的防御

    *   5.5、管理身份和访问配置生命周期

        *   账户访问审查（如用户、系统、服务）

            *   访问配置

                *   身份管理的第一步是创建新账户并为其配置适当的权限

                *   最初创建新用户同城称为登记或注册

                *   作为招聘流程的一部分，新员工应接受有关组织安全策略和程序的培训

                *   在招聘完成前，员工通常需要审查并签署一份承诺维护组织安全标准的协议--AUP

            *   账户审查

        *   预配和取消预配（如入职，离职和调动）

            *   需要对帐号定期进行审核

            *   当用户拥有比完成所需工作更多的权限是，就会形成过度权限

            *   蠕变权限设计用户帐号随着工作角色和分工的更改而积累权限

        *   角色定义（例如，分配到新角色的人员）

        *   特权升级（例如，托管服务用户，使用sudo、最小化其使用）

    *   5.6、部署身份验证系统

        *   OpenID连接OIDC/开放式授权（Oauth)：OpenID Connect (OIDC)是使用 0Auth2.0 授权框架的身份认证层。关键点是 OIDC同时提供身份认证和授权

        *   安全断言标记语言SAML

            *   多个供应商的数据库可以依托 XML 格式导入和导出数据，从而使 XML 成为交换信息的通用语言

            *   安全断言标记语言(SAML) 是一种基于 XML 的开放标准，通常用于在联邦组织之间交换身份认证和授权(AA)信息。SAML 提供支持浏览器访间的 SSO 功能

            *   实体

                *   委托人或用户代理

                *   服务提供商

                *   身份提供者：IdP 是持有用户身份认证和授权信息的第三方，IdP可以发送三种类型的XML消息：认证声明、授权声明、属性声明。

        *   Kerberos

            *   票证身份认证是一种采用第三方实体来证明身份并提供身份认证的机制

            *   要素

                *   密钥分发中心

                *   Kerberos身份认证服务器

                *   票证

                *   票证授予的票证

                *   Kerberos主体

                *   Kerberos领域

            *   登录流程

                *   (1) 用户在客户端输入用户名和密码。

                *   (2) 客户端使用 AES 对用户名进行加密并将其传输到 KDC

                *   (3) KDC 根据已知凭证的数据库来验证用户名。

                *   (4) KDC 生成一个对称密钥，该密钥由客户端和 Kerberos 服务器使用。 KDC 使用用户口令的哈希值对密钥进行加密。 KDC 还会生成一个加密的附带时间戳的 TGT

                *   (5) KDC 然后将加密的对称密钥、加密的带时间戳的 TGT 传输给客户端。

                *   (6) 客户端存储 TGT 以供使用，直到它过期。客户端还使用用户口令的哈希值来解密对称密钥。

            *   访问流程

                *   (1) 客户端将自己的 TGT 发送至 KDC, 并请求访问资源。

                *   (2) KDC 验证 TGT 是否有效并检查其访问控制矩阵，进而验证用户是否具有足够的权限来访问诘求的资源。

                *   (3) KDC 生成服务票证并将其发送给客户端。

                *   (4) 客户端将服务票证发送到托管资源的服务器或服务。

                *   (5) 托管资源的服务器或服务通过 KDC 验证票证的有效性。

                *   (6) 一旦验证过身份和授权， Kerberos活动就结束了。服务器或服务主机便与客户端建立会话，并开始通信或数据传输。

            *   限制

                *   Kerberos 存在单点故障，即 KDC

                *   Kerberos 也具有严格的时间要求，默认配置要求所有系统保持5分钟以内的时间同步

        *   远程验证拨号用户服务RADIUS

            *   RADIUS 默认使用用户数据报协议(UDP) ，仅加密口令的交互过程。

            *   使用 TLS 时， RADIUS 使用 TCP2083 端口。 RADIUS 使用 UDP 1812 端口传输 RADIUS消息，并使用 UDP 1813 端口传输 RADIUS 计费信息。

        *   增强型终端访问控制器访问控制系统TACACS+

            *   TACACS＋使用 TCP49 端口，为数据包的传输提供更高级别的可靠性。

            *   TACACS＋可以加密所有身份认证信息

        *   比较SAML、OAuth、OpenID、OIDC

            *   SAML（Security Assertion Markup Language）

                *   SAML2.0 是一种基于 XML 的开放标准。

                *   OASIS 2005 年将 SAML2.0 纳入标准。

                *   SAML2.0 使用三个实体，即主体（如用户）、服务提供商（如网站）和身份提供者（持有认证和授权信息的第三方）

            *   OAuth

                *   SAML 可以提供主体的认证、授权和属性信息。

                *   OAuth 是一个授权框架，而不是一个认证协议。

                *   OAuth 使用 API 交换信息。

                *   应用程序从身份提供者那里获取访问令牌。

                *   随后，应用程序包含用于授权的访问令牌。

            *   OpenID

                *   OpenID 是一种身份认证标准。

                *   用户在站点上输入 OpenID 标识符（如 [bobsmith2021.myopenid.com](http://bobsmith2021.myopenid.com/)), OpenID提供商会验证此标识符

            *   OIDC

                *   OIDC 是使用 0Auth2.0 的身份认证层。

                *   它建立在 OpenID 身份认证标准之上。

                *   它提供身份认证和授权。

                *   它建立在 OpenID 之上，但使用 JSONWeb 令牌

        *   混合联合身份管理（Hybrid Federation）：混合联合是基于云的解决方案和本地解决方案的组合。比如，公司A有一个基于云的联合身份系统，为员工提供在线培训。与公司B合并后，他们实施了一个本地解决方案，用于实现两家公司共享身份。这种方法不会自动授予公司B员工访问培训站点的权限。但是，可以将现有的本地解决方案与培训站点的基于云的解决方案相集成。这为公司B的员工创建了一个混合解决方案，并且与其他联合解决方案一样，为公司B的员工提供了SSO。

        *   本地联合身份管理（On-Premise Federation）：联合身份管理系统可以部署在本地、云端或两种方式都用的混合模式。作为本地联合身份管理系统的例子，假设公司A与公司B合并。两家公司都有自己的网络和 SSO 系统。但是，管理层希望员工无需登录两次即可访问两个网络中的资源。通过创建本地联合身份管理系统，两家公司可以共享身份验证数据。该系统允许用户继续正常登录，但他们也将有权访问其他公司的网络资源。本地解决方案为组织提供了最大的控制权。

        *   （Cloud-Based Federation）：基于云的联合身份管理通常使用第三方服务来共享联合身份。一种常见的方法是将用户的内部登录 ID 与联合身份进行匹配。例如，许多企业在线培训网站使用联合 SSO 系统。当组织与在线培训公司协同员工访问时，他们也会协同联合身份的详细信息。用户使用他们的正常登录 ID 在组织内登录。当用户使用 Web 浏览器访问培训网站时，联合身份管理系统使用他们的登录 ID来检索匹配的联合身份。如果找到匹配项，则授权用户访问授予联合身份的网页。

        *   无密码身份认证（Passwordless Authentication）：无密码身份认证允许用户无需输入密码（或任何其他记住的秘密）即可登录系统。例如，许多智能手机和平板电脑都支持生物识别认证。快速身份识别在线联盟（Fast Identity Online，FIDO)联盟是一个开放的行业协会，其既定使命是减少对密码的过度依赖。

        *   开放式授权Oauth

    *   5.7、访问控制的攻击

        *   风险要素，三大要素

            *   风险：是威胁利用漏洞导致诸如资产损害等损失的可能性

            *   威胁：是可能导致不良后果的潜在事件

            *   漏洞

                *   是任何类型的弱点

                *   弱点是由于硬件或软件的缺陷或限制，或者缺少安全控制

        *   风险管理

            *   试图通过实施控制或对策来减少或消除漏洞，或减少潜在威胁的影响

            *   关键任务

                *   识别资产

                    *   资产评估是指确定资产的实际价值，目的是确定资产的优先级

                    *   资产的价值不仅仅是购买价格

                    *   偷渡式下载drive-by download、

                        *   用户只要点击该链接，他们的计算机就会感染

                        *   页面顾虑用户下载并安装受恶意软件感染的文件

                *   识别威胁

                    *   威胁建模是指识别、理解和分类潜在威胁的过程、方法、

                        *   专注于资产

                        *   专注于攻击者

                        *   专注于软件

                    *   组织通常在系统的设计过程中尽早开始威胁建模，并在整个生命周期长继续进行。微软SD3+C、

                        *   设计安全

                        *   默认安全

                        *   部署和通信安全

                    *   APT攻击

                        *   高度的积极性、技术和耐心

                        *   拥有先进的知识和各种技能来检测和利用漏洞

                        *   鱼叉式网络钓鱼

                *   识别漏洞

        *   常见的访问控制攻击

            *   访问聚合攻击

                *   访问聚合是指收集多条非敏感信息并将它们组合以获得敏感信息

                *   结合纵深防御、知其所需和最小特权原则有助于防止访问聚合攻击

            *   密码攻击

                *   强密码有助于防止密码攻击、密码不应以明文形式存储、更改默认密码

                *   使用su与sudo命令

                *   尽量减少使用sudo命令

                *   字典攻击：字典攻击是指尝试通过使用预定义数据库中的每个可能密码或公共或预期密码列表来发现密码

                *   凭证填充攻击：仅检查每个站点的单个用户名及口令

                *   口令攻击：

                    *   强口令有助于防止口令攻击

                    *   当用户进行身份认证时，系统会对用户提供的口令进行哈希计算，且通常以加密格式将哈希值发送到身份认证服务器。

                    *   对口令进行哈希计算时，务必使用强哈希函数

                    *   同样重要的是修改默认口令

                *   暴力攻击

                    *   暴力攻击是通过系统地尝试所有可能的字母、数字和符号组合来尝试发现用户账户的密码

                    *   混合攻击(hybrid attack) 首先尝试字典攻击，再使用一对一构造的口令来执行暴力破解攻击

                *   生日攻击：生日攻击的重点是寻找碰撞

                *   彩虹表攻击

                    *   许多系统通常使用加盐(salt) 口令来降低彩虹表攻击的有效性

                    *   Argon2 bcrypt PBKDF2（基于口令的密钥派生函数 2) 是三种常用的加盐密码算法

                *   嗅探器攻击

                *   喷射攻击(spraying attack) ：是一种特殊类型的暴力破解攻击。攻击者在在线密码攻击中使用喷射攻击，并试图绕过账户锁定的安全控制措施

                *   欺骗攻击

                    *   电子邮件欺骗

                    *   电话号码欺骗，是VoIP系统上的常用技术

                *   社会工程攻击：肩窥，社会工程视图越过受害者肩膀查看计算机屏幕上的信息或在受害者输入时观察键盘操作。

                *   网络钓鱼：是一种社会工程，它视图欺骗用户放弃敏感信息，打开附件或点击链接。

                *   鱼叉式网络钓鱼

                *   网络捕鲸

                *   哈希传递攻击

                    *   哈希传递(PtH)攻击是指攻击者将捕获的口令哈希值发送到身份认证服务。

                    *   渗透测试人员和攻击者使用 Mirnikatz 和其他工具（如 DCSync)来捕获口令哈希值

                *   智能卡攻击

                    *   侧信道攻击是一种被动的非侵入性攻击，旨在观察设备的操作。

                    *   攻击者可了解卡内包含的有价值信息。

                *   Mimikatz：已经成为黑客和渗透测试人员使用的流行工具。以下是 Mimikatz 的一些功能：

                    *   从内存中读取密码

                    *   提取 Kerberos 票证

                    *   提取证书和私钥

                    *   在内存中读取 LM 和 NTLM 密码哈希

                    *   在本地安全授权子系统服务（LSASS）中读取明文密码

                    *   列出正在运行的进程。

                *   Kerberos漏洞利用攻击

                    *   哈希传递攻击：当网络上禁用 NTLM 时，可以使用这种方法替代哈希传递攻击。即使网络上禁用 NTLM, 系统仍会创建 NTLM 哈希值并将其存储在内存中。攻击者可以使用用户口令哈希值请求票证授予的票证(TGT) 并使用 TGT 访问网络资源。这种攻击有时被称为传递密钥

                    *   票证传递：在票证传递攻击中，攻击者试图获取 lsass.exe 进程中保存的票证。在获取票证后，攻击者注入票证以冒充用户

                    *   白银票据(silver ticket)：白银票证使用截获的服务账户 NTLM 哈希值来创建票证授予服(TGS)票证

                    *   黄金票据(gold ticket)：如果能获得 Kerberos 服务账户(KRBTGT) 的哈希值，攻击者就可以在活动目录中随意创建票证。这给了攻击者非常大的权力，因此被称为黄金票证

                    *   Kerberos暴力破解：攻击者可以在 Linux 系统上运行 Python 脚本 kerbrute.py 或在Windows 系统上运行 Rubeus 。除了猜测口令，这些工具还可猜测用户名。 Kerberos 回复用户名是否有效

                    *   ASREPRoast：此攻击识别未启用 Kerberos 预身份认证的用户。 Kerberos 预身份认证是Kerberos 的一项安全功能，有助于抵御口令猜测攻击。禁用预身份认证后，攻击者可以向 KDC发送身份认证请求。 KDC 将回复一个票证授予票证(TGT) ，使用客户端的口令进行加密。然后攻击者可以发起离线攻击来解密票证并发现客户端的口令

                    *   Kerberoastin：此攻击收集加密的票证授予服务(TGS)票证。服务账户使用 TGS 票证。TGS 票证由用户账户上下文中运行的服务使用。此攻击试图找到没有 Kerberos 预身份认证的用户

            *   核心保护方法综述

                *   控制对系统的物理访问

                *   控制对文件的电子访问

                *   创建强密码策略

                *   散列和加盐密码

                *   使用密码屏蔽

                *   部署多因素身份验证

                *   使用帐号锁定控制

                *   使用上次登录通知

                *   用户安全培训